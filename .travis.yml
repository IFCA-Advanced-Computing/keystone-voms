# We need sudo until this pr gets merged
# https://github.com/travis-ci/apt-package-whitelist/pull/2497
sudo: true

before_install:
    - sudo apt-get -qq update
    - sudo apt-get install -y libvomsapi1

language: python
python:
    "2.7"

addons:
    apt:
        packages:
            - swig
            - libvomsapi1
            - python-m2crypto

virtualenv:
    system_site_packages: true

install:
    - git clone https://github.com/openstack/keystone/ -b stable/liberty /tmp/keystone
    - pip install /tmp/keystone
    - pip install tox
    - pip install -r requirements.txt
    - pip install -r test-requirements.txt

script:
    - python setup.py testr --slowest
    - flake8
